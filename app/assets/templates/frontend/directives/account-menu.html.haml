.panel.panel-default.panel-right.account-data-menu
  .panel-body

    -# If not user
    %div{"ng-if" => "!user"}
      %p Enter your <a href="https://standardnotes.org" target="_blank">Standard File</a> account information. You can also register for free using the default server address.
      .small-v-space

      %form.account-form.mt-5{'name' => "loginForm"}
        %input.form-control{:name => 'server', :placeholder => 'Server URL', :required => true, :type => 'text', 'ng-model' => 'formData.url'}
        %input.form-control{:autofocus => 'autofocus', :name => 'email', :placeholder => 'Email', :required => true, :type => 'email', 'ng-model' => 'formData.email'}
        %input.form-control{:placeholder => 'Password', :name => 'password', :required => true, :type => 'password', 'ng-model' => 'formData.user_password'}

        %div{"ng-if" => "!formData.status"}
          %button.btn.dark-button.half-button{"ng-click" => "loginSubmitPressed()", "data-style" => "expand-right", "data-size" => "s", "state" => "buttonState"}
            %span Sign In
          %button.btn.dark-button.half-button{"ng-click" => "submitRegistrationForm()", "data-style" => "expand-right", "data-size" => "s", "state" => "buttonState"}
            %span Register
          %br
          .block{"style" => "margin-top: 10px; font-size: 14px; font-weight: bold; text-align: center;"}
            %a.btn{"ng-click" => "showResetForm = !showResetForm"} Passwords cannot be forgotten.

      %em.block.center-align.mt-10{"ng-if" => "formData.status", "style" => "font-size: 14px;"} {{formData.status}}

      %div{"ng-if" => "showResetForm"}
        %p{"style" => "font-size: 13px; text-align: center;"}
          Because notes are locally encrypted using a secret key derived from your password, there's no way to decrypt these notes if you forget your password.
          For this reason, Standard Notes cannot offer a password reset option. You <strong>must</strong> make sure to store or remember your password.
    -# End if not user

    -# If user
    %div{"ng-if" => "user"}
      %label Local Encryption
      %p Notes are encrypted locally before being sent to the server. Neither the server owner nor an intrusive entity can decrypt your locally encrypted notes.
      %label Status:
      {{encryptionStatusForNotes()}}
    -# End if user

    .mt-5{"ng-if" => "user"}
      %label{"ng-if" => "user"}
        %input{"type" => "radio", "ng-model" => "archiveFormData.encrypted", "ng-value" => "true", "ng-change" => "archiveFormData.encrypted = true"}
        Encrypted
      %label
        %input{"type" => "radio", "ng-model" => "archiveFormData.encrypted", "ng-value" => "false", "ng-change" => "archiveFormData.encrypted = false"}
        Decrypted
    %a{"ng-click" => "downloadDataArchive()"} Download Data Archive

    %div{"ng-if" => "!importData.loading"}
      %label#import-archive
        %input{"type" => "file", "style" => "display: none;", "file-change" => "->", "handler" => "importFileSelected(files)"}
        %a.disabled
          %span
            Import Data from Archive
      %div{"ng-if" => "importData.requestPassword"}
        Enter the account password associated with the import file.
        %input{"type" => "text", "ng-model" => "importData.password"}
        %button{"ng-click" => "submitImportPassword()"} Decrypt & Import

    .spinner{"ng-if" => "importData.loading"}

    %a{"ng-click" => "destroyLocalData()"} Destroy all local data
